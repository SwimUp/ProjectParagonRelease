<?xml version="1.0" encoding="utf-8"?>
<Patch>
	<Operation Class="PatchOperationSequence">
		<success>Normal</success>
		<operations>
			<li Class="PatchOperationReplace">
				<xpath>*/ThingDef[defName="Sandbags"]</xpath>
				<value>
					<ThingDef ParentName="BuildingBase">
						<defName>Sandbags</defName>
						<label>sandbags</label>
						<description>Bags of locally-sourced dirt or sand, stacked for use as cover. Sandbags are ugly, but provide better cover than other low objects.</description>
						<thingClass>Building</thingClass>
						<category>Building</category>
						<graphicData>
							<texPath>Things/Building/Linked/Sandbags_Atlas</texPath>
							<graphicClass>Graphic_Single</graphicClass>
							<linkType>Basic</linkType>
							<linkFlags>
								<li>Sandbags</li>
							</linkFlags>
						</graphicData>
						<uiIconPath>Things/Building/Linked/Sandbags_MenuIcon</uiIconPath>
						<altitudeLayer>Building</altitudeLayer>
						<pathCost>42</pathCost>
						<pathCostIgnoreRepeat>true</pathCostIgnoreRepeat>
						<passability>PassThroughOnly</passability>
						<castEdgeShadows>true</castEdgeShadows>
						<fillPercent>0.55</fillPercent>
						<canOverlapZones>false</canOverlapZones>
						<statBases>
							<MaxHitPoints>300</MaxHitPoints>
							<Beauty>-10</Beauty>
							<WorkToBuild>180</WorkToBuild>
							<Flammability>0</Flammability>
						</statBases>
						<building>
							<ai_chillDestination>false</ai_chillDestination>
							<isInert>true</isInert>
							<blueprintGraphicData>
								<texPath>Things/Building/Linked/Sandbags_Blueprint_Atlas</texPath>
							</blueprintGraphicData>
						</building>
						<placingDraggableDimensions>1</placingDraggableDimensions>
						<stuffCategories>
							<li>Fabric</li>
							<li>Leathery</li>
						</stuffCategories>
						<colorPerStuff>
							<li>
								<stuff>Cloth</stuff>
								<color>(139,122,87)</color>
							</li>
						</colorPerStuff>
						<costStuffCount>5</costStuffCount>
						<costList>
							<Sand>10</Sand>
						</costList>
						<filthLeaving>SandbagRubble</filthLeaving>
						<rotatable>false</rotatable>
						<selectable>true</selectable>
						<neverMultiSelect>true</neverMultiSelect>
						<terrainAffordanceNeeded>Light</terrainAffordanceNeeded>
						<designationCategory>Security</designationCategory>
						<staticSunShadowHeight>0.20</staticSunShadowHeight>
						<repairEffect>ConstructDirt</repairEffect>
						<designationHotKey>Misc1</designationHotKey>
						<designatorDropdown>Barricades</designatorDropdown>
						<researchPrerequisites>
						  <li>AdvancedDefense</li>
						</researchPrerequisites>
					</ThingDef>
				</value>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>*/ThingDef[defName="Barricade"]</xpath>
				<value>
					<ThingDef ParentName="BuildingBase">
						<defName>Barricade</defName>
						<label>barricade</label>
						<description>A waist-high barrier for use as cover from incoming shots. Barricades are ugly, but provide better cover than other low objects. Barricades will block certain kinds of animals the same way that fences do.</description>
						<thingClass>Building</thingClass>
						<category>Building</category>
						<graphicData>
							<texPath>Things/Building/Linked/Barricade_Atlas</texPath>
							<graphicClass>Graphic_Single</graphicClass>
							<linkType>Basic</linkType>
							<linkFlags>
								<li>Barricades</li>
							</linkFlags>
							<color>(139,122,87)</color>
						</graphicData>
						<uiIconPath>Things/Building/Linked/Barricade_MenuIcon</uiIconPath>
						<uiIconScale>1.2</uiIconScale>
						<altitudeLayer>Building</altitudeLayer>
						<pathCost>42</pathCost>
						<pathCostIgnoreRepeat>true</pathCostIgnoreRepeat>
						<passability>PassThroughOnly</passability>
						<castEdgeShadows>true</castEdgeShadows>
						<fillPercent>0.55</fillPercent>
						<canOverlapZones>false</canOverlapZones>
						<statBases>
							<MaxHitPoints>300</MaxHitPoints>
							<Beauty>-3</Beauty>
							<WorkToBuild>320</WorkToBuild>
							<Flammability>1</Flammability>
						</statBases>
						<building>
							<ai_chillDestination>false</ai_chillDestination>
							<isInert>true</isInert>
							<isFence>true</isFence>
							<isPlaceOverableWall>true</isPlaceOverableWall>
							<blueprintGraphicData>
								<texPath>Things/Building/Linked/Barricade_Blueprint_Atlas</texPath>
							</blueprintGraphicData>
						</building>
						<placingDraggableDimensions>1</placingDraggableDimensions>
						<stuffCategories>
							<li>Metallic</li>
							<li>Woody</li>
							<li>Stony</li>
						</stuffCategories>
						<costStuffCount>10</costStuffCount>
						<filthLeaving>Filth_RubbleBuilding</filthLeaving>
						<rotatable>false</rotatable>
						<selectable>true</selectable>
						<neverMultiSelect>true</neverMultiSelect>
						<useStuffTerrainAffordance>true</useStuffTerrainAffordance>
						<terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
						<!-- Best affordance needed for stone -->
						<designationCategory>Security</designationCategory>
						<staticSunShadowHeight>0.20</staticSunShadowHeight>
						<designationHotKey>Misc1</designationHotKey>
						<designatorDropdown>Barricades</designatorDropdown>
						<researchPrerequisites>
						  <li>AdvancedDefense</li>
						</researchPrerequisites>
					</ThingDef>
				</value>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>*/ThingDef[defName="TrapSpike"]</xpath>
				<value>
					<ThingDef ParentName="BuildingBase">
						<defName>TrapSpike</defName>
						<label>spike trap</label>
						<description>Five spikes under tension, connected to a touch-activated trigger. When the victim disturbs the trigger, the spikes spring forth and strike the victim. Since it is hidden in the surrounding terrain, it cannot be placed adjacent to other traps. Animals can sense these when calm.</description>
						<thingClass>Building_TrapDamager</thingClass>
						<graphicData>
							<texPath>Things/Building/Security/TrapSpikeArmed</texPath>
							<graphicClass>Graphic_Single</graphicClass>
							<damageData>
								<rect>(0,0,1,0.15)</rect>
							</damageData>
						</graphicData>
						<altitudeLayer>Building</altitudeLayer>
						<rotatable>false</rotatable>
						<tickerType>Normal</tickerType>
						<stealable>false</stealable>
						<minifiedDef>MinifiedThing</minifiedDef>
						<thingCategories>
							<li>BuildingsSecurity</li>
						</thingCategories>
						<statBases>
							<Mass>2.5</Mass>
							<MaxHitPoints>40</MaxHitPoints>
							<WorkToBuild>3200</WorkToBuild>
							<Flammability>1</Flammability>
							<Beauty>-18</Beauty>
							<Cleanliness>-5</Cleanliness>
							<TrapMeleeDamage>100</TrapMeleeDamage>
							<TrapSpringChance>1.0</TrapSpringChance>
						</statBases>
						<stuffCategories>
							<li>Metallic</li>
							<li>Woody</li>
							<li>Stony</li>
						</stuffCategories>
						<costStuffCount>45</costStuffCount>
						<costList>
							<ComponentPrimitive>2</ComponentPrimitive>
						</costList>
						<designationCategory>Security</designationCategory>
						<designationHotKey>Misc6</designationHotKey>
						<building>
							<isTrap>true</isTrap>
							<trapDestroyOnSpring>true</trapDestroyOnSpring>
							<trapDamageCategory>Sharp</trapDamageCategory>
							<expandHomeArea>false</expandHomeArea>
							<ai_chillDestination>false</ai_chillDestination>
						</building>
						<constructionSkillPrerequisite>3</constructionSkillPrerequisite>
						<placeWorkers>
							<li>PlaceWorker_NeverAdjacentTrap</li>
						</placeWorkers>
						<designatorDropdown>Traps</designatorDropdown>
						<researchPrerequisites>
							<li>PrimitiveDefense</li>
						</researchPrerequisites>
					</ThingDef>
				</value>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>*/ThingDef[@Name="TrapIEDBase"]</xpath>
				<value>
					<designatorDropdown>Traps</designatorDropdown>
				</value>
			</li>
		</operations>
	</Operation>
</Patch>